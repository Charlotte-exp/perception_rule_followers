{{ block title }}

    Dice roll {{ player.round_number }}

{{ endblock }}

{{ block style }}

<style>

    body {
        margin: 0;
    }

    .roll-container {
        display: flex;
        justify-content: center;
        width: 100%;
        padding: 2rem 0;
    }

    .dice {
        width: 85px;
        height: 85px;
        background-color: white;
        border: 2px solid black;
        display: inline-grid; /* this matters so the dice are centered */
        grid-template-columns: repeat(3, 1fr);
        grid-template-rows: repeat(3, 1fr);
        padding: 8px;
        border-radius: 8px;
        box-shadow: 2px 2px 10px rgba(0,0,0,0.2);
        gap: 4px;
    }

    .dot {
        width: 16px;
        height: 16px;
        background-color: black;
        border-radius: 50%;
        opacity: 0;
    }

    .show {
        opacity: 1;
    }

   .number-row {
        justify-content: center;
        display: flex;
        flex-direction: row
        margin-top:1vw;
        /*gap: 1vw; !* Space between numbers scales with viewport width *!*/
        gap: 0.5vw; /* Space between numbers scales with viewport width */
        flex-wrap: wrap; /* Optional: allows wrapping if buttons exceed container width */
        align-items: center; /* Ensures proper vertical alignment */
    }

</style>

<script>

    /////////  Dice  /////////

    function showDice(diceId, number) {
        const dotPositions = {
            1: [5],
            2: [1, 9],
            3: [1, 5, 9],
            4: [1, 3, 7, 9],
            5: [1, 3, 5, 7, 9],
            6: [1, 3, 4, 6, 7, 9]
        };

        console.log(`showDice called for ${diceId} with number ${number}`);

        // Ensure number is valid
        if (!dotPositions[number]) {
            console.error(`Invalid dice number: ${number}`);
            return;
        }

        // Remove all "show" classes
        document.querySelectorAll(`#${diceId} .dot`).forEach(dot => dot.classList.remove('show'));

        // Add "show" to relevant dots
        dotPositions[number].forEach(pos => {
            let dotId = `${diceId}-${pos}`;
            let dotElement = document.getElementById(dotId);

            if (dotElement) {
                dotElement.classList.add('show');
                console.log(`✅ Showing dot: ${dotId}`);
            } else {
                console.warn(`⚠️ Missing dot element: ${dotId}`);
            }
        });
    }

    document.addEventListener("DOMContentLoaded", function () {
        const original = parseInt("{{ original_dice }}", 10) || 1;
        showDice('dice1', original);
    });

</script>

{{ endblock }}

{{ block content }}

<div class="card bg-light instructions">
    <div class="card-body" style="font-size: 14px">
        Keep in mind:
        <ul>
            <li>Please report the number that you rolled. Your bonus will depend on your reported number.
            <li>The higher the number you report, the more money you earn.
            {{ if treatment != 'control' }}
            <li>What you do will be observed by other participants.
            {{ endif }}
        </ul>
    </div>
</div>


    <p style="display: flex; justify-content: center; margin-top: 50px;">
        Click to roll the dice:
    </p>
<div class="roll-container">
    <p>
        <button name="random_roll" value="draw" class="btn btn-primary btn-large">Roll</button>
    </p>
</div>





{{ endblock }}